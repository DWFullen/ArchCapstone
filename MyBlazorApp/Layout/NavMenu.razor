@inject IJSRuntime JS

<nav class="navbar navbar-expand-lg navbar-dark top-nav" style="background: linear-gradient(180deg, #4d4d4d 60%, #f7931a 100%); border-bottom: 4px solid #f7931a;">
    <div class="container-fluid">
        <div class="navbar-custom">
            <a class="navbar-brand" href="" style="font-family: Ryzes;">Rebel Corpo</a>
            <ul class="navbar-nav">
                <li class="nav-item" style="margin-right: 1rem;">
                    <NavLink class="nav-link" href="Home" Match="NavLinkMatch.All">Home</NavLink>
                </li>
                <li class="nav-item" style="margin-right: 1rem;">
                    <NavLink class="nav-link" href="Shop" Match="NavLinkMatch.All">Shop</NavLink>
                </li>
                <!-- Add more nav items here -->       
            </ul>
            
        </div>
    </div>
    <div class="mode-toggle">
            <button class="btn btn-outline-light ms-auto" @onclick="ToggleTheme" title="Toggle dark/light mode">
                @(isDarkMode ? "🌙" : "☀️")
            </button>
    </div>
</nav>

@code {

    private bool isDarkMode = true;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // Try to get theme from localStorage
            var theme = await JS.InvokeAsync<string>("blazorTheme.getTheme");
            if (theme == "light")
            {
                isDarkMode = false;
                await SetThemeClass();
                StateHasChanged();
            }
            else if (theme == "dark")
            {
                isDarkMode = true;
                await SetThemeClass();
                StateHasChanged();
            }
        }
    }

    private async Task ToggleTheme()
    {
        isDarkMode = !isDarkMode;
        await SetThemeClass();
        await JS.InvokeVoidAsync("blazorTheme.setTheme", isDarkMode ? "dark" : "light");
    }

    private async Task SetThemeClass()
    {
        await JS.InvokeVoidAsync("blazorTheme.setBodyClass", isDarkMode ? "dark-mode" : "light-mode");
    }
}

<!-- Add this script to your index.html or _Host.cshtml -->
<!--
<script>
    window.blazorTheme = {
        setBodyClass: function (themeClass) {
            document.body.classList.remove('dark-mode', 'light-mode');
            document.body.classList.add(themeClass);
        },
        setTheme: function (theme) {
            localStorage.setItem('theme', theme);
        },
        getTheme: function () {
            return localStorage.getItem('theme') || 'dark';
        }
    };
</script>
-->
